<div class="col-xs-12 page">

  <div class="bg-white overflowX">
    <div class="row">
      <h3 class="col-sm-9 col-xs-12">Servers news</h3>
      <h3 class="col-sm-3 hidden-xs">Quick Links</h3>

      <template v-if="results.servers.found > 0">
        <most-multi :results="results.servers.items" fielder="services"
                    :ptitle="`Most services installed (last ${this.limit} server)`"
                    pfail="No service registered inside of yours servers"></most-multi>
        <server-widget :servers="getLast('servers')"></server-widget>
        <server-widget :servers="getLast('servers', 5)"></server-widget>
      </template>

      <template v-if="results.servers.found == 0">
        <div class="col-sm-9 col-xs-12 text-center">
          <well>Not enough data
            <router-link :to="{name: 'servers'}" class="btn btn-primary">Create your first server</router-link>
          </well>
        </div>
      </template>

      <links-widget :links="links"></links-widget>
    </div>

    <div class="row">
      <p class="text-right col-sm-9 col-xs-12">Total Servers <b>{{results.servers.found}}</b></p>
    </div>

    <hr/>

    <div class="row">
      <h3 class="col-xs-12">Applications</h3>

      <template v-if="results.applications.found > 0">
        <apps-widget :apps="getLast('applications')"></apps-widget>

        <most-single :results="results.applications.items" fielder="family"
                     :ptitle="`Most types used (last ${this.limit} apps)`"></most-single>

        <most-single :results="results.applications.items" fielder="environment"
                     :ptitle="`Most env installed (last ${this.limit} apps)`"></most-single>

        <apps-widget :apps="getLast('applications', 5)"></apps-widget>
      </template>

      <template v-if="results.applications.found == 0">
        <div class="col-xs-12 text-center">
          <well>
            Not enough data
            <router-link :to="{name: 'application'}" class="btn btn-primary">Create your first app</router-link>
          </well>
        </div>
      </template>

      <p class="text-right col-xs-12">Total Apps <b>{{results.applications.found}}</b></p>
    </div>

    <hr/>

    <div class="row">
      <h3 class="col-sm-6 col-xs-12">Datacenters avaliable</h3>
      <h3 class="col-sm-6 hidden-xs">System</h3>

      <template v-if="results.datacenters.found > 0">
        <dc-widget :items="getLast('datacenters')"></dc-widget>

        <most-single :results="results.datacenters.items" fielder="provider"
                     :ptitle="`Most provider updated (last ${this.limit} dcs)`"></most-single>
      </template>

      <template v-if="results.datacenters.found == 0">
        <div class="col-sm-6 col-xs-12 text-center">
          <well>Not enough data
            <router-link :to="{name: 'datacenter'}" class="btn btn-primary">Create your first dc</router-link>
          </well>
        </div>
      </template>

      <template v-if="results.system.found > 0">
        <system-widget :items="getLast('system')"></system-widget>

        <most-multi :results="results.system.items" fielder="clients"
                    :ptitle="`Most clients updated (last ${this.limit} system)`"></most-multi>
      </template>

      <template v-if="results.system.found == 0">
        <div class="col-sm-6 col-xs-12 text-center">
          <well>
            Not enough data
            <router-link :to="{name: 'system'}" class="btn btn-primary">Create your first system</router-link>
          </well>
        </div>
      </template>

    </div>

    <div class="row">
      <p class="text-right col-sm-3 hidden-xs">Total dcs <b>{{results.datacenters.found}}</b></p>
      <p class="text-right col-sm-3 col-sm-offset-3 hidden-xs">Total system <b>{{results.system.found}}</b></p>
    </div>
  </div>

</div>

