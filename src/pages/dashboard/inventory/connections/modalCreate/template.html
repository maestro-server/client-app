<div>
  <modal :title="text.title" effect="fade" width="800" v-model="showModal" @closed="closed">

    <template>
      <p>
        Configure yours connections, <br>you able to use multiple connections with single datacenter.
        <button class="btn btn-warning btn-sm pull-right" @click="createLoad" v-if="provider">Back</button>
      </p>

      <list-options :lists="providers" @click="callStep" v-if="!provider"></list-options>

      <form class="row">

        <h3 class="col-xs-12" v-if="provider">
          <i :class="toIcon"></i>
          <span class="text-uppercase">{{provider}}</span>
        </h3>

        <template v-for="prov in providers" v-if="provider == prov.label">

          <div class="col-xs-6">
            <p v-if="prov.template.intro">
              {{prov.template.intro}}
            </p>

            <bs-select :options="dcs" v-model="data.dc"
                       label="Datacenter" placeholder="Select Datacenter" @input="updateRegions"
                       ref="s_provider"></bs-select>

            <bs-select :disabled="regions.length == 0" :options="regions" v-model="data.regions"
                       label="Regions" placeholder="Select Regions" multiple></bs-select>

            <well v-if="!create">
              If you like to update the access provider, please delete this connection and create a new one.
            </well>

            <template v-if="create">
              <component
                v-for="component in prov.template.conn"
                :is="component.comp"
                :key="component.metas.name"
                v-bind="component.metas"
                v-model="data.conn[component.metas.name]"
                v-validate.initial="component.validate"
                :error="makeError(component.metas.name)"
              />
            </template>
          </div>

          <div class="col-xs-6">
            <template v-for="component in prov.template.extra">
              <template v-if="component.html">
                <div v-html="component.html"/>
              </template>

              <template v-if="!component.html">
                <component
                  :is="component.comp"
                  v-bind="component.metas"
                  v-model="data[component.metas.name]"
                  v-validate.initial="component.validate"
                  :error="makeError(component.metas.name)"
                />
              </template>
            </template>
          </div>
        </template>

      </form>
    </template>

    <div slot="modal-footer" class="modal-footer">
      <button type="button" class="btn btn-default" @click="closed">Cancel</button>
      <button type="button" class="btn btn-primary" @click="actionClick">Save
      </button>
    </div>

  </modal>
</div>
